:root{--primary-blue:#4a90e2;--primary-blue-light:#6ba8ff;--primary-green:#50c878;--primary-green-light:#70e898;--accent-yellow:#ffd166;--accent-orange:#ff9a5a;--accent-pink:#ff7eb3;--bg-color:#f8fbff;--card-bg:#fff;--text-primary:#333;--text-secondary:#666;--border-color:#e1e8f0;--shadow-sm:0 2px 8px rgba(74,144,226,0.1);--shadow-md:0 4px 16px rgba(74,144,226,0.15);--shadow-lg:0 8px 32px rgba(74,144,226,0.2);--radius-sm:8px;--radius-md:16px;--radius-lg:24px;--transition-fast:.2s ease;--transition-normal:.3s ease;--transition-slow:.5s ease}*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Noto Sans CJK JP',Roboto,'Helvetica Neue',Arial,sans-serif;background:var(--bg-color);color:var(--text-primary);line-height:1.6;min-height:100vh;padding:16px;overflow-x:hidden}.container{max-width:480px;margin:0 auto;padding:0 16px}.app-header{text-align:center;padding:24px 0;margin-bottom:24px}.app-title{font-size:2.5rem;font-weight:800;color:var(--primary-blue);margin-bottom:8px;text-shadow:2px 2px 4px rgba(74,144,226,0.2)}.app-subtitle{font-size:1.1rem;color:var(--text-secondary);font-weight:500}.cup-display{background:var(--card-bg);border-radius:var(--radius-lg);padding:32px 24px;margin-bottom:24px;box-shadow:var(--shadow-md);text-align:center;position:relative;overflow:hidden}.cup-display::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--primary-blue),var(--primary-green))}.cup-container{position:relative;width:160px;height:200px;margin:0 auto 24px}.cup{position:relative;width:120px;height:180px;margin:0 auto}.cup-body{position:absolute;width:100%;height:100%;background:linear-gradient(135deg,#e3f2fd,#bbdefb);border-radius:0 0 60px 60px;border:4px solid var(--primary-blue);overflow:hidden;box-shadow:inset 0 -8px 16px rgba(74,144,226,0.3)}.water-level{position:absolute;bottom:0;left:0;width:100%;height:20%;background:linear-gradient(to top,var(--primary-blue-light),var(--primary-blue));transition:height var(--transition-slow);border-radius:0 0 56px 56px}.cup-handle{position:absolute;right:-20px;top:40px;width:40px;height:80px;border:4px solid var(--primary-blue);border-left:0;border-radius:0 40px 40px 0}.cup-face{position:absolute;bottom:-40px;left:50%;transform:translateX(-50%);font-size:3rem;filter:drop-shadow(2px 4px 6px rgba(0,0,0,0.1));animation:float 3s ease-in-out infinite}@keyframes float{0%,100%{transform:translateX(-50%) translateY(0)}50%{transform:translateX(-50%) translateY(-10px)}}.cup-status{margin-top:24px}#statusText{font-size:1.2rem;color:var(--text-primary);margin-bottom:16px;min-height:3em}.progress-container{background:var(--border-color);border-radius:20px;height:24px;overflow:hidden;position:relative;margin-bottom:8px}.progress-bar{height:100%;width:0;background:linear-gradient(90deg,var(--primary-green),var(--primary-blue));border-radius:20px;transition:width var(--transition-normal)}.progress-text{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;font-size:.9rem;font-weight:600;color:white;text-shadow:1px 1px 2px rgba(0,0,0,0.3)}.stats-section{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:24px}.stat-card{background:var(--card-bg);border-radius:var(--radius-md);padding:20px 12px;text-align:center;box-shadow:var(--shadow-sm);transition:transform var(--transition-fast),box-shadow var(--transition-fast)}.stat-card:hover{transform:translateY(-4px);box-shadow:var(--shadow-md)}.stat-card h3{font-size:.9rem;color:var(--text-secondary);margin-bottom:8px;font-weight:600}.stat-value{font-size:1.8rem;font-weight:800;color:var(--primary-blue)}.action-section{display:grid;grid-template-columns:2fr 1fr 1fr;gap:12px;margin-bottom:24px}.btn{border:0;border-radius:var(--radius-md);padding:16px;font-size:1rem;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:all var(--transition-fast);text-decoration:none}.btn-primary{background:linear-gradient(135deg,var(--primary-blue),var(--primary-green));color:white;box-shadow:0 4px 12px rgba(74,144,226,0.4)}.btn-primary:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(74,144,226,0.5)}.btn-primary:active{transform:translateY(0)}.btn-secondary{background:var(--card-bg);color:var(--text-primary);border:2px solid var(--border-color)}.btn-secondary:hover{border-color:var(--primary-blue);color:var(--primary-blue)}.btn-icon{font-size:1.2rem}.environment-section{margin-bottom:32px}.weather-card{background:linear-gradient(135deg,#e3f2fd,#f1f8e9);border-radius:var(--radius-lg);padding:24px;box-shadow:var(--shadow-sm);border:2px solid var(--primary-blue-light)}.weather-card h3{font-size:1.2rem;color:var(--primary-blue);margin-bottom:12px;display:flex;align-items:center;gap:8px}#weatherInfo,#waterRecommendation{margin-bottom:8px;font-size:1rem;color:var(--text-primary)}#waterRecommendation{font-weight:600;color:var(--primary-green)}.app-footer{text-align:center;padding:24px 0;color:var(--text-secondary);font-size:.9rem;border-top:1px solid var(--border-color);margin-top:32px}.app-footer p{margin-bottom:8px}.copyright{font-size:.8rem;opacity:.7}@media(max-width:480px){.app-title{font-size:2rem}.stats-section{grid-template-columns:repeat(3,1fr);gap:12px}.stat-card{padding:16px 8px}.stat-value{font-size:1.5rem}.action-section{grid-template-columns:1fr}}@keyframes bounce{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}@keyframes pulse{0%,100%{opacity:1}50%{opacity:.7}}.bounce{animation:bounce .5s ease}.pulse{animation:pulse 1s ease infinite}.refresh-weather-btn{background:var(--primary-blue);color:white;border:0;border-radius:var(--radius-sm);padding:8px 16px;font-size:.9rem;cursor:pointer;margin-top:12px;transition:var(--transition-fast);display:inline-flex;align-items:center;gap:6px}.refresh-weather-btn:hover{background:var(--primary-blue-light);transform:translateY(-1px)}.refresh-weather-btn:active{transform:translateY(0)}.refresh-weather-btn:disabled{background:var(--text-secondary);cursor:not-allowed;opacity:.7}.weather-loading{background:rgba(255,255,255,0.9);border-radius:var(--radius-md);padding:12px;margin-top:12px;text-align:center;color:var(--text-secondary);font-size:.9rem;animation:pulse 1.5s ease infinite}.weather-reason{background:rgba(80,200,120,0.1);border-radius:var(--radius-sm);padding:8px 12px;margin-top:10px;border-left:3px solid var(--primary-green)}.weather-offline{background:rgba(255,107,107,0.1);border-radius:var(--radius-sm);padding:8px 12px;margin-top:10px;border-left:3px solid #ff6b6b;color:#ff6b6b}.weather-icon{width:48px;height:48px;margin-right:12px;vertical-align:middle}.weather-header{display:flex;align-items:center;margin-bottom:12px}.modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,0.5);animation:fadeIn .3s ease}.modal.show{display:flex;align-items:center;justify-content:center}.modal-content{background:var(--card-bg);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);width:90%;max-width:600px;max-height:80vh;overflow:hidden;animation:slideUp .3s ease}.modal-header{padding:24px;border-bottom:2px solid var(--border-color);display:flex;justify-content:space-between;align-items:center;background:linear-gradient(135deg,var(--primary-blue),var(--primary-green));color:white}.modal-header h2{font-size:1.5rem;margin:0}.close-btn{background:0;border:0;font-size:2rem;color:white;cursor:pointer;padding:0;width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:var(--transition-fast)}.close-btn:hover{background:rgba(255,255,255,0.2)}.modal-body{padding:24px;overflow-y:auto;max-height:calc(80vh - 80px)}.achievements-stats{display:flex;justify-content:space-around;background:var(--bg-color);border-radius:var(--radius-md);padding:20px;margin-bottom:24px;border:2px solid var(--border-color)}.stat-item{display:flex;flex-direction:column;align-items:center}.stat-label{font-size:.9rem;color:var(--text-secondary);margin-bottom:8px}.stat-value{font-size:1.8rem;font-weight:bold;color:var(--primary-blue)}.achievements-list{display:grid;gap:16px}.achievement-card{background:var(--card-bg);border-radius:var(--radius-md);padding:20px;display:flex;align-items:center;gap:20px;border:2px solid var(--border-color);transition:var(--transition-normal);position:relative}.achievement-card:hover{transform:translateY(-4px);box-shadow:var(--shadow-md);border-color:var(--primary-blue-light)}.achievement-card.unlocked{border-color:var(--primary-green);background:linear-gradient(135deg,rgba(80,200,120,0.05),rgba(255,209,102,0.05))}.achievement-card.locked{opacity:.8;filter:grayscale(30%)}.achievement-badge{font-size:3rem;width:80px;height:80px;display:flex;align-items:center;justify-content:center;background:white;border-radius:50%;box-shadow:var(--shadow-sm);flex-shrink:0}.achievement-card.unlocked .achievement-badge{animation:pulse 2s infinite;box-shadow:0 0 20px rgba(80,200,120,0.3)}.achievement-content{flex:1}.achievement-name{font-size:1.2rem;font-weight:bold;color:var(--text-primary);margin-bottom:8px}.achievement-description{color:var(--text-secondary);margin-bottom:12px;font-size:.95rem}.achievement-progress{display:flex;align-items:center;gap:12px}.progress-bar-container{flex:1;height:8px;background:var(--border-color);border-radius:4px;overflow:hidden}.progress-bar-fill{height:100%;background:linear-gradient(90deg,var(--primary-blue),var(--primary-green));border-radius:4px;transition:width .5s ease}.progress-text{font-size:.9rem;color:var(--text-secondary);min-width:80px}.achievement-unlocked-date{font-size:.8rem;color:var(--primary-green);margin-top:8px}.loading-spinner{text-align:center;padding:40px;color:var(--text-secondary);font-size:1.1rem}@keyframes unlockPulse{0%{transform:scale(1);box-shadow:0 0 0 0 rgba(80,200,120,0.7)}70%{transform:scale(1.1);box-shadow:0 0 0 20px rgba(80,200,120,0)}100%{transform:scale(1);box-shadow:0 0 0 0 rgba(80,200,120,0)}}.unlock-animation{animation:unlockPulse 1.5s ease}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideUp{from{transform:translateY(50px);opacity:0}to{transform:translateY(0);opacity:1}}@media(max-width:768px){.modal-content{width:95%;max-height:90vh}.achievements-stats{flex-direction:column;gap:16px}.achievement-card{flex-direction:column;text-align:center;gap:16px}.achievement-badge{font-size:2.5rem;width:70px;height:70px}}.modal-lg{max-width:800px}.preview-controls{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px;margin-bottom:30px;padding:20px;background:var(--bg-color);border-radius:var(--radius-md);border:2px solid var(--border-color)}.control-group{display:flex;flex-direction:column;gap:8px}.control-group label{font-weight:600;color:var(--text-primary);font-size:.95rem}.control-group select,.control-group input[type="number"]{padding:10px 14px;border:2px solid var(--border-color);border-radius:var(--radius-sm);font-size:1rem;transition:var(--transition-fast);background:white}.control-group select:focus,.control-group input[type="number"]:focus{outline:0;border-color:var(--primary-blue);box-shadow:0 0 0 3px rgba(74,144,226,0.2)}.control-group input[type="range"]{width:100%;height:6px;background:var(--border-color);border-radius:3px;outline:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.control-group input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;width:20px;height:20px;background:var(--primary-blue);border-radius:50%;cursor:pointer}.control-group input[type="range"]::-moz-range-thumb{width:20px;height:20px;background:var(--primary-blue);border-radius:50%;cursor:pointer;border:0}.control-group input[type="range"]::-ms-thumb{width:20px;height:20px;background:var(--primary-blue);border-radius:50%;cursor:pointer;border:0}.control-group input[type="range"]::-webkit-slider-runnable-track{width:100%;height:6px;background:var(--border-color);border-radius:3px;cursor:pointer}.control-group input[type="range"]::-moz-range-track{width:100%;height:6px;background:var(--border-color);border-radius:3px;cursor:pointer;border:0}.control-group input[type="range"]::-ms-track{width:100%;height:6px;background:transparent;border-color:transparent;color:transparent;cursor:pointer}.control-group input[type="range"]::-ms-fill-lower{background:var(--border-color);border-radius:3px}.control-group input[type="range"]::-ms-fill-upper{background:var(--border-color);border-radius:3px}.button-group{display:flex;gap:12px;flex-wrap:wrap;margin-top:10px}.preview-results{margin:30px 0;padding:24px;background:white;border-radius:var(--radius-md);border:2px solid var(--border-color)}.preview-results h3{margin-bottom:20px;color:var(--text-primary);font-size:1.3rem;padding-bottom:10px;border-bottom:2px solid var(--border-color)}.message-list{display:flex;flex-direction:column;gap:16px;max-height:300px;overflow-y:auto;padding-right:10px}.message-item{padding:18px;background:var(--bg-color);border-radius:var(--radius-sm);border-left:4px solid var(--primary-blue);animation:fadeIn .5s ease}.message-item .message-style{display:inline-block;padding:4px 12px;background:var(--primary-green);color:white;border-radius:20px;font-size:.85rem;font-weight:600;margin-bottom:10px}.message-item .message-content{font-size:1.1rem;line-height:1.5;color:var(--text-primary)}.empty-state{text-align:center;padding:40px 20px;color:var(--text-secondary)}.preview-stats{padding:20px;background:var(--bg-color);border-radius:var(--radius-md);border:2px solid var(--border-color)}.preview-stats h3{margin-bottom:20px;color:var(--text-primary);font-size:1.2rem}.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:20px}.stat-box{padding:20px;background:white;border-radius:var(--radius-sm);text-align:center;border:2px solid var(--border-color)}.stat-label{display:block;font-size:.9rem;color:var(--text-secondary);margin-bottom:8px}.stat-value{display:block;font-size:2rem;font-weight:700;color:var(--primary-blue)}